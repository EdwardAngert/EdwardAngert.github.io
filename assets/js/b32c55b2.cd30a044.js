"use strict";(self.webpackChunkea_dot_com=self.webpackChunkea_dot_com||[]).push([[305],{8930:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var o=n(5893),i=n(1151);const s={title:"Configure Updates and Network-Level Blocking",sidebar_position:4},l=void 0,r={id:"docs/pi-hole/network-level-blocking",title:"Configure Updates and Network-Level Blocking",description:"Updates",source:"@site/docs/docs/pi-hole/network-level-blocking.mdx",sourceDirName:"docs/pi-hole",slug:"/docs/pi-hole/network-level-blocking",permalink:"/edwardangert.github.io/docs/pi-hole/network-level-blocking",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Configure Updates and Network-Level Blocking",sidebar_position:4},sidebar:"docs",previous:{title:"Add Block/Allowlists to the Pi-hole",permalink:"/edwardangert.github.io/docs/pi-hole/block-allow-lists"}},a={},d=[{value:"Updates",id:"updates",level:2},{value:"Create a Script to Update the Pi-Hole and Lists Automatically",id:"create-a-script-to-update-the-pi-hole-and-lists-automatically",level:3},{value:"Configure the Omada Controller to Enable Network-Wide Blocking with Pi-Hole",id:"configure-the-omada-controller-to-enable-network-wide-blocking-with-pi-hole",level:2}];function c(e){const t={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"updates",children:"Updates"}),"\n",(0,o.jsx)(t.p,{children:"Update the Pi-hole's OS, software, and lists with:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-zsh",children:"sudo apt update && sudo apt upgrade -y\npihole -up -y\nsudo /usr/local/sbin/pihole-updatelists\n"})}),"\n",(0,o.jsx)(t.h3,{id:"create-a-script-to-update-the-pi-hole-and-lists-automatically",children:"Create a Script to Update the Pi-Hole and Lists Automatically"}),"\n",(0,o.jsx)(t.p,{children:"Put the update commands into a script so that you can run it from Cron and assign it an alias. This gives you a central location from which to maintain the commands that run:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Create the script:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-zsh",children:"touch ~/.pi-hole-update.sh\n"})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Edit the file to include:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-zsh",metastring:'title="~/.pi-hole-update.sh" showLineNumbers',children:"#!/bin/zsh\n\nsudo apt update && sudo apt upgrade -y\npihole -up -y\nsudo /usr/local/sbin/pihole-updatelists\n"})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Add a new Cron job that runs the script every Sunday morning at 03:00. Edit ",(0,o.jsx)(t.code,{children:"/etc/crontab"})," to add this line:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",metastring:'title="/etc/crontab"',children:"0  3    * * * 0 pi      ~/.pi-hole-update.sh\n"})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["To run the updater script whenever you want, create an ",(0,o.jsx)(t.code,{children:"update!"})," alias. Add this line to ",(0,o.jsx)(t.code,{children:"~/.zshrc"})," (or ",(0,o.jsx)(t.code,{children:"~/.bashrc"})," if you're using bash):"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-zsh",metastring:'title="~/.zshrc"',children:"alias update!='. ~/.pi-hole-update.sh'\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"configure-the-omada-controller-to-enable-network-wide-blocking-with-pi-hole",children:"Configure the Omada Controller to Enable Network-Wide Blocking with Pi-Hole"}),"\n",(0,o.jsx)(t.p,{children:"Configure the Omada controller and set the DNS server to use the Pi's IP address."}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Log in to the controller and click the site's name."}),"\n",(0,o.jsxs)(t.li,{children:["Click the ",(0,o.jsx)(t.strong,{children:"Settings"})," cog then ",(0,o.jsx)(t.strong,{children:"Wired Networks"})," and click the edit icon for the network name that should use the Pi-hole."]}),"\n",(0,o.jsxs)(t.li,{children:["Next to ",(0,o.jsx)(t.strong,{children:"DHCP Server"}),", select ",(0,o.jsx)(t.strong,{children:"\u2611 Enable"})," to expand the DHCP options."]}),"\n",(0,o.jsxs)(t.li,{children:["Next to ",(0,o.jsx)(t.strong,{children:"DNS Server"}),", select ",(0,o.jsx)(t.strong,{children:"Manual"})," and enter the Pi-hole's IP address into the first box. In the second box, enter ",(0,o.jsx)(t.code,{children:"1.1.1.1"})," to use Cloudflare's DNS as a backup."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>l});var o=n(7294);const i={},s=o.createContext(i);function l(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);